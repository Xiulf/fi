module Main

import Fmt
import Fmt.Arg as FmtArg

@main
fn main(argc: i32, argv: [*][*:0]u8) -> i32
    var x = 0..10;

    loop
        match x.next()
            Some(i): print_fmt("i: %\n", [FmtArg.usize(&i)][..])
            None: break
        end
    end

    0
end

enum Option<T>
    Some(val: T)
    None
end

@lang "range"
struct Range
    lo: usize
    hi: usize

    fn next() -> Option<usize>
        if self.lo < self.hi
            self.lo += 1;
            Some(self.lo - 1)
        else
            None
        end
    end
end
