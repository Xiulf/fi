module Main =

import Core
import Intrinsics (transmute)

module C =
    import Core

    foreign malloc :: Uptr -> Ptr ()
    foreign free :: Ptr () -> ()


malloc s = C.malloc s . transmute
free p = C.free (p . transmute)


@main
main () =
    x = malloc 8 :: Ptr Int64
    y = malloc 4 :: Ptr Int32
    free x
    free y
    0
