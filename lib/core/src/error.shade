module core/error =

import prim (Partial)
import intrinsics (partial)

postfix unwrap_unsafe as (!)
infixl 5 unwrap_or as (?)

@lang = "try-class"
class Try self =
    fn ret :: output -> self output
    fn bind :: self a, (a -> self b) -> self b

class Unwrap self =
    fn unwrap :: self output -> output where Partial
    fn unwrap_or :: self output, output -> output

fn unwrap_unsafe x = partial (unwrap x)
