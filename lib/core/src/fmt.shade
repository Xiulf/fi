module fmt =

import prim
import prim/intrinsics (unsafe, transmute, ($))

class Write p =
    fun write :: p -> []Byte -> p

type Stdout =| Stdout

instance Write Stdout =
    fun write s bytes = do
        let (ptr, len) = unsafe $ transmute bytes
        libc/write libc/STDOUT_FILENO ptr len
        s
